jQuery.noConflict(); jQuery(function($) { var doc = $(document); 
var cuztomUI;(cuztomUI=function(t){t=$(t),$(".js-cztm-datepicker",t).map(function(){return $(this).datepicker({dateFormat:$(this).data("date-format")})}),$(".js-cztm-timepicker",t).map(function(){return $(this).timepicker({timeFormat:$(this).data("time-format")})}),$(".js-cztm-datetimepicker",t).map(function(){return $(this).datetimepicker({timeFormat:$(this).data("time-format"),dateFormat:$(this).data("date-format")})}),$(".js-cuztom-colorpicker",t).wpColorPicker(),$(".js-cztm-tabs",t).tabs(),$(".js-cztm-slider",t).slider(),$(".js-cztm-accordion",t).accordion(),$(".js-cztm-sortable",t).sortable({handle:".cuztom-handle-sortable a"})})(document);
doc.on("click",".js-cztm-add-sortable",function(t){var e=$(this),o=$(".js-cztm").attr("data-box-id"),a="bundle"==e.attr("data-sortable-type"),c=e.attr("data-field-id"),d=$(".cuztom-field#"+c),i=d.find(".js-cztm-counter"),n=i.find(".js-current"),r=(i.find(".js-max"),d.find(".cuztom-sortable")),m=r.find(".cuztom-sortable-item").length,s=m,l={action:a?"cuztom_add_bundle_item":"cuztom_add_repeatable_item",cuztom:{box_id:o,field_id:c,count:m,index:s}};$.post(Cztm.ajax_url,l,function(t){var t=$.parseJSON(t);t.status?(r.append(t.item),n.text(m+1)):alert(t.message),cuztomUI(document)}),t.preventDefault()}),doc.on("click",".js-cztm-remove-sortable",function(){var t=$(this),e=t.closest(".cuztom-sortable-item"),o=e.closest(".cuztom-sortable"),a=o.closest(".cuztom-field"),c=a.attr("data-field-id"),d=($('.cuztom-control[data-control-for="'+c+'"]'),o.find(".cuztom-sortable-item").length),i=a.find(".js-cztm-counter"),n=i.find(".js-current");i.find(".js-max");return e.remove(),n.text(d-1),1==o.find(".cuztom-sortable-item").length&&o.find(".cuztom-sortable-item").last().find(".js-cztm-remove-sortable").remove(),!1});
doc.on("click",".js-cztm-remove-media",function(){var e=$(this),t=e.closest(".cuztom-field");return t.find(".cuztom-preview").html(""),t.find(".cuztom-hidden").val(""),e.hide(),!1}),doc.on("click",".js-cztm-upload",function(){var e,t=$(this),i=t.data("media-type"),a=(t.data("id"),t.parent()),m=$(".cuztom-hidden",a),r=$(".cuztom-preview",a);return previewSize="medium",e?void e.open():(e=wp.media.frames.file_frame=wp.media({multiple:!1,type:i}),e.on("select",function(){if(attachment=e.state().get("selection").first().toJSON(),a.find(".js-cztm-remove-media").remove(),t.after('<a href="#" class="js-cztm-remove-media cuztom-remove-media"></a>'),"image"==i){var n=previewSize&&!$.isArray(previewSize)&&attachment.sizes[previewSize]?attachment.sizes[previewSize]:attachment.sizes.medium?attachment.sizes.medium:attachment.sizes.full;$.isArray(previewSize)&&(parseInt(previewSize[0])>0&&(n.width=parseInt(previewSize[0])),parseInt(previewSize[1])>0&&(n.height=parseInt(previewSize[1]))),r.html('<img src="'+n.url+'" height="'+n.height+'" width="'+n.width+'" />'),m.val(attachment.id)}else r.html('<span class="cuztom-mime"><a href="'+attachment.url+'" target="_blank">'+attachment.name+"</a></span>"),m.val(attachment.url)}),e.open(),!1)});
doc.on("click",".js-cztm-ajax-save",function(t){var a=$(this),o=a.closest(".js-cztm"),e=a.closest(".js-cztm-field"),c=e.attr("data-id"),i=o.attr("data-box-id"),d=o.attr("data-object-id"),r=o.data("meta-type"),s=e.find(".cuztom-input"),l=s.val(),n={action:"cuztom_save_field",cuztom:{value:l,box_id:i,field_id:c,meta_type:r,object_id:d}};$.post(Cztm.ajax_url,n,function(t){var t=$.parseJSON(t),a=s.css("border-color");t.status&&s.animate({borderColor:"#60b334"},400,function(){s.animate({borderColor:a})})}),t.preventDefault()}); });