jQuery.noConflict(); jQuery(function($) { var doc = $(document); 
var cuztomUI;(cuztomUI=function(t){var t=$(t);$(".js-cuztom-datepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,timepicker:!1,format:$(this).data("date-format")})}),$(".js-cuztom-timepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,datepicker:!1,format:$(this).attr("data-time-format")})}),$(".js-cuztom-datetimepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,format:$(this).data("date-format")+" "+$(this).data("time-format")})}),$(".js-cuztom-colorpicker",t).wpColorPicker(),$(".js-cuztom-tabs",t).tabs(),$(".js-cuztom-slider",t).slider(),$(".js-cuztom-accordion",t).accordion(),$(".js-cuztom-sortable",t).sortable({handle:".cuztom-handle-sortable a"})})(document);
doc.on("click",".js-cuztom-add-sortable",function(t){var o=$(this),e=o.closest(".js-cuztom"),s=e.data("box-id"),a=o.data("sortable-type");if("repeatable"==a)var c=o.closest(".js-cuztom-field"),d=c.find(".js-cuztom-counter");else{var n=o.closest(".js-cuztom-control"),i=n.data("control-for"),d=n.find(".js-cuztom-counter"),c=$('.js-cuztom-field[data-id="'+i+'"]');console.log(d)}var l=c.find(".js-cuztom-sortable"),u=d.find(".js-current"),r=(d.find(".js-max"),l.find(".js-cuztom-sortable-item").length),m=r,f=Cuztom.ajax_url,j={action:"cuztom_add_"+a+"_item",cuztom:{box:s,field:o.data("field-id"),count:r,index:m}};$.post(f,j,function(t){var t=$.parseJSON(t);t.status?(l.append(t.item),u.text(r+1)):alert(t.message),cuztomUI(document)}),t.preventDefault()}),doc.on("click",".js-cuztom-remove-sortable",function(t){var o=$(this),e=o.closest(".js-cuztom"),s=(e.data("box-id"),o.closest(".js-cuztom-sortable-item")),a=o.closest(".js-cuztom-field"),c=a.find(".js-cuztom-sortable"),d=(o.data("sortable-type"),a.find(".js-cuztom-counter")),n=d.find(".js-current"),i=(d.find(".js-max"),c.find(".js-cuztom-sortable-item").length);s.remove(),n.text(i-1),t.preventDefault()});
doc.on("click",".js-cuztom-remove-media",function(){var t=$(this),e=t.closest(".js-cuztom-field");return e.find(".cuztom-preview").html(""),e.find(".cuztom-input-hidden").val(""),t.hide(),!1}),doc.on("click",".js-cuztom-upload",function(){var t,e=$(this),i=e.attr("data-media-type")||"image",a=e.closest(".js-cuztom-field"),m=a.find(".cuztom-input-hidden"),n=a.find(".cuztom-preview"),s="medium";return void 0!==t?void t.open():(t=wp.media.frames.file_frame=wp.media({multiple:!1,type:i}),t.on("select",function(){if(attachment=t.state().get("selection").first().toJSON(),a.find(".js-cuztom-remove-media").remove(),e.after('<a href="#" class="button button-small cuztom-remove-media js-cuztom-remove-media" tabindex="-1">x</a>'),"image"==i){var o=s&&!$.isArray(s)&&attachment.sizes[s]?attachment.sizes[s]:attachment.sizes.medium?attachment.sizes.medium:attachment.sizes.full;$.isArray(s)&&(parseInt(s[0])>0&&(o.width=parseInt(s[0])),parseInt(s[1])>0&&(o.height=parseInt(s[1]))),n.html('<img src="'+o.url+'" height="'+o.height+'" width="'+o.width+'" />')}m.val(attachment.id)}),t.open(),!1)});
doc.on("click",".js-cztm-ajax-save",function(t){var a=$(this),o=a.closest(".js-cztm"),e=a.closest(".js-cztm-field"),c=e.attr("data-id"),i=o.attr("data-box-id"),d=o.attr("data-object-id"),r=o.data("meta-type"),s=e.find(".cuztom-input"),l=s.val(),n={action:"cuztom_save_field",cuztom:{value:l,box_id:i,field_id:c,meta_type:r,object_id:d}};$.post(Cuztom.ajax_url,n,function(t){var t=$.parseJSON(t),a=s.css("border-color");t.status&&s.animate({borderColor:"#60b334"},400,function(){s.animate({borderColor:a})})}),t.preventDefault()}); });